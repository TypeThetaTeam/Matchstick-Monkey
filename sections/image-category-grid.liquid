{% comment %}
Section: Image Category Grid
Responsive image grid with text/button overlay
Desktop: 5 columns | Tablet: 3 columns | Mobile: 2 columns + last full width
{% endcomment %}

<section class="image-category-grid">
  <div class="container">
    <div class="grid">
      {% for block in section.blocks %}
        <div class="grid-item{% if forloop.last %} last-item{% endif %}">
          {% if block.settings.image != blank %}
            <img 
              src="{{ block.settings.image | image_url: width: 800 }}" 
              alt="{{ block.settings.button_label | escape }}"
              class="category-image"
              loading="lazy"
            >
          {% endif %}
          {% if block.settings.button_label != blank %}
            <a 
              href="{{ block.settings.button_link }}" 
              class="category-button {{ section.settings.button_style }}">
              {{ block.settings.button_label }}
            </a>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<style>
.image-category-grid {
  padding: 40px 0;
}

.image-category-grid .container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 20px;
}

.image-category-grid .grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
}

.image-category-grid .grid-item {
  position: relative;
  overflow: hidden;
  border-radius: 10px;
}

.image-category-grid .category-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.image-category-grid .category-button {
  position: absolute;
  bottom: 15px;
  left: 50%;
  transform: translateX(-50%);
  background: #fff;
  padding: 6px 16px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  text-decoration: none;
  color: #000;
  transition: all 0.3s ease;
}

.image-category-grid .category-button:hover {
  background: #000;
  color: #fff;
}

/* Button style variations */
.image-category-grid .category-button.outline {
  background: transparent;
  border: 1px solid #fff;
  color: #fff;
}

.image-category-grid .category-button.outline:hover {
  background: #fff;
  color: #000;
}

/* Responsive */
@media screen and (max-width: 1024px) {
  .image-category-grid .grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media screen and (max-width: 767px) {
  .image-category-grid {
    padding: 20px 0;
  }

  .image-category-grid .grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .image-category-grid .grid-item.last-item {
    grid-column: 1 / -1; /* Makes the last block span full width */
  }
}
</style>

{% schema %}
{
  "name": "Image Category Grid",
  "settings": [
    {
      "type": "select",
      "id": "button_style",
      "label": "Button Style",
      "options": [
        { "value": "solid", "label": "Solid" },
        { "value": "outline", "label": "Outline" }
      ],
      "default": "solid"
    }
  ],
  "blocks": [
    {
      "type": "category_block",
      "name": "Category Block",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button Label",
          "default": "Category"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image Category Grid",
      "category": "Custom Sections"
    }
  ]
}
{% endschema %}
